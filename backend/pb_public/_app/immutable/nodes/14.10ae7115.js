import{s as $e,h as we,n as K,i as ue,r as je}from"../chunks/scheduler.a6287574.js";import{S as ke,i as ye,e as Q,a as V,t as L,b as _e,d as E,f as b,p as be,m as le,n as ae,g as $,s as k,r as q,h as w,j as I,c as y,u as z,B as Ee,k as c,x as m,v as G,A as re,D as ge,o as ve,w as Y,C as Ie}from"../chunks/index.3e76b7a6.js";import{e as ce}from"../chunks/each.a5b882b1.js";import{p as fe,U as Te}from"../chunks/stores.10c58602.js";import{g as Le}from"../chunks/navigation.d1a89a94.js";import{I as Pe,T as Ue}from"../chunks/Icon.8a942844.js";import{I as te}from"../chunks/Input.ae2cab64.js";import"../chunks/paths.1b4de03e.js";import{g as De,v as Se}from"../chunks/utils.85594516.js";import{t as Ne}from"../chunks/Toaster.svelte_svelte_type_style_lang.3e69948a.js";import{T as Ae}from"../chunks/TextArea.e4b99141.js";import{e as Oe}from"../chunks/schemas.0ec87125.js";import{s as Re}from"../chunks/index.3d80d59d.js";const Be=async({locals:n,params:t})=>t,tt=Object.freeze(Object.defineProperty({__proto__:null,load:Be},Symbol.toStringTag,{value:"Module"})),J=""+new URL("../assets/dummyThumbnail.5301149f.svg",import.meta.url).href;function me(n,t,l){const e=n.slice();return e[11]=t[l],e}function Ce(n){let t;return{c(){t=le("Editing Forbidden! or Project Not found!")},l(l){t=ae(l,"Editing Forbidden! or Project Not found!")},m(l,e){V(l,t,e)},p:K,i:K,o:K,d(l){l&&b(t)}}}function Me(n){let t,l,e,a,u,r,o,i,g,v,R,H,p,j,T=n[1].name+"",A,B,P,W,U,X,D,Z,S,x,O,ne='<button type="submit" class="btn btn-primary w-full max-w-lg">Save Changes</button>',C,ee,se,d=n[2]!=J&&pe(n),_=n[0]?.thumbnail&&de(n);return P=new te({props:{id:"name",label:"Project name",value:n[3]?.name??n[1].name,errors:n[0]?.name}}),U=new te({props:{id:"tagline",label:"Project tagline",value:n[3]?.tagline??n[1].tagline,errors:n[0]?.tagline}}),D=new te({props:{id:"url",label:"Project URL",value:n[3]?.url??n[1].url,errors:n[0]?.url}}),S=new Ae({props:{id:"description",label:"Project description",value:n[3]?.description??n[1].description,errors:n[0]?.description}}),{c(){t=$("div"),l=$("div"),e=$("form"),a=$("input"),u=k(),r=$("label"),o=$("label"),d&&d.c(),i=k(),g=$("div"),v=$("img"),H=k(),_&&_.c(),p=k(),j=$("h3"),A=le(T),B=k(),q(P.$$.fragment),W=k(),q(U.$$.fragment),X=k(),q(D.$$.fragment),Z=k(),q(S.$$.fragment),x=k(),O=$("div"),O.innerHTML=ne,this.h()},l(s){t=w(s,"DIV",{class:!0});var h=I(t);l=w(h,"DIV",{class:!0});var M=I(l);e=w(M,"FORM",{class:!0,enctype:!0});var f=I(e);a=w(f,"INPUT",{type:!0,name:!0,id:!0,class:!0}),u=y(f),r=w(f,"LABEL",{for:!0,class:!0});var N=I(r);o=w(N,"LABEL",{for:!0,class:!0});var F=I(o);d&&d.l(F),F.forEach(b),i=y(N),g=w(N,"DIV",{class:!0});var oe=I(g);v=w(oe,"IMG",{id:!0,src:!0,alt:!0}),oe.forEach(b),N.forEach(b),H=y(f),_&&_.l(f),p=y(f),j=w(f,"H3",{class:!0});var ie=I(j);A=ae(ie,T),ie.forEach(b),B=y(f),z(P.$$.fragment,f),W=y(f),z(U.$$.fragment,f),X=y(f),z(D.$$.fragment,f),Z=y(f),z(S.$$.fragment,f),x=y(f),O=w(f,"DIV",{class:!0,"data-svelte-h":!0}),Ee(O)!=="svelte-fx01r3"&&(O.innerHTML=ne),f.forEach(b),M.forEach(b),h.forEach(b),this.h()},h(){c(a,"type","file"),c(a,"name","thumbnail"),c(a,"id","thumbnail"),c(a,"class","file-input file-input-bordered w-full max-w-lg mt-2"),a.hidden=!0,c(o,"for","thumbnail"),c(o,"class","absolute -top-3 -right-4 hover:cursor-pointer"),c(v,"id","thumbnail-preview"),ue(v.src,R=n[2])||c(v,"src",R),c(v,"alt","project thumbnail"),c(g,"class","w-20 rounded"),c(r,"for","thumbnail"),c(r,"class","avatar w-20 hover:cursor-pointer "),c(j,"class","text-3xl font-bold"),c(O,"class","w-full max-w-lg pt-3"),c(e,"class","flex flex-col space-y-2 w-full items-center"),c(e,"enctype","multipart/form-data"),c(l,"class","w-full"),c(t,"class","flex flex-col w-full h-full p-2")},m(s,h){V(s,t,h),m(t,l),m(l,e),m(e,a),m(e,u),m(e,r),m(r,o),d&&d.m(o,null),m(r,i),m(r,g),m(g,v),m(e,H),_&&_.m(e,null),m(e,p),m(e,j),m(j,A),m(e,B),G(P,e,null),m(e,W),G(U,e,null),m(e,X),G(D,e,null),m(e,Z),G(S,e,null),m(e,x),m(e,O),C=!0,ee||(se=[re(a,"change",n[5]),re(e,"submit",ge(n[4]))],ee=!0)},p(s,h){s[2]!=J?d?(d.p(s,h),h&4&&E(d,1)):(d=pe(s),d.c(),E(d,1),d.m(o,null)):d&&(be(),L(d,1,1,()=>{d=null}),_e()),(!C||h&4&&!ue(v.src,R=s[2]))&&c(v,"src",R),s[0]?.thumbnail?_?_.p(s,h):(_=de(s),_.c(),_.m(e,p)):_&&(_.d(1),_=null),(!C||h&2)&&T!==(T=s[1].name+"")&&ve(A,T);const M={};h&2&&(M.value=s[3]?.name??s[1].name),h&1&&(M.errors=s[0]?.name),P.$set(M);const f={};h&2&&(f.value=s[3]?.tagline??s[1].tagline),h&1&&(f.errors=s[0]?.tagline),U.$set(f);const N={};h&2&&(N.value=s[3]?.url??s[1].url),h&1&&(N.errors=s[0]?.url),D.$set(N);const F={};h&2&&(F.value=s[3]?.description??s[1].description),h&1&&(F.errors=s[0]?.description),S.$set(F)},i(s){C||(E(d),E(P.$$.fragment,s),E(U.$$.fragment,s),E(D.$$.fragment,s),E(S.$$.fragment,s),C=!0)},o(s){L(d),L(P.$$.fragment,s),L(U.$$.fragment,s),L(D.$$.fragment,s),L(S.$$.fragment,s),C=!1},d(s){s&&b(t),d&&d.d(),_&&_.d(),Y(P),Y(U),Y(D),Y(S),ee=!1,je(se)}}}function pe(n){let t,l,e,a,u;return l=new Pe({props:{src:Ue,class:"w-5 h-5 text-white"}}),{c(){t=$("button"),q(l.$$.fragment),this.h()},l(r){t=w(r,"BUTTON",{class:!0});var o=I(t);z(l.$$.fragment,o),o.forEach(b),this.h()},h(){c(t,"class","btn btn-error btn-sm btn-circle")},m(r,o){V(r,t,o),G(l,t,null),e=!0,a||(u=re(t,"click",ge(n[6])),a=!0)},p:K,i(r){e||(E(l.$$.fragment,r),e=!0)},o(r){L(l.$$.fragment,r),e=!1},d(r){r&&b(t),Y(l),a=!1,u()}}}function de(n){let t,l=ce(n[0]?.thumbnail),e=[];for(let a=0;a<l.length;a+=1)e[a]=he(me(n,l,a));return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Q()},l(a){for(let u=0;u<e.length;u+=1)e[u].l(a);t=Q()},m(a,u){for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(a,u);V(a,t,u)},p(a,u){if(u&1){l=ce(a[0]?.thumbnail);let r;for(r=0;r<l.length;r+=1){const o=me(a,l,r);e[r]?e[r].p(o,u):(e[r]=he(o),e[r].c(),e[r].m(t.parentNode,t))}for(;r<e.length;r+=1)e[r].d(1);e.length=l.length}},d(a){a&&b(t),Ie(e,a)}}}function he(n){let t,l,e=n[11]+"",a,u;return{c(){t=$("label"),l=$("span"),a=le(e),u=k(),this.h()},l(r){t=w(r,"LABEL",{for:!0,class:!0});var o=I(t);l=w(o,"SPAN",{class:!0});var i=I(l);a=ae(i,e),i.forEach(b),u=y(o),o.forEach(b),this.h()},h(){c(l,"class","label-text-alt text-error"),c(t,"for","thumbnail"),c(t,"class","label py-0 pt-1")},m(r,o){V(r,t,o),m(t,l),m(l,a),m(t,u)},p(r,o){o&1&&e!==(e=r[11]+"")&&ve(a,e)},d(r){r&&b(t)}}}function Fe(n){let t,l,e,a;const u=[Me,Ce],r=[];function o(i,g){return i[1]?.id!=null?0:1}return t=o(n),l=r[t]=u[t](n),{c(){l.c(),e=Q()},l(i){l.l(i),e=Q()},m(i,g){r[t].m(i,g),V(i,e,g),a=!0},p(i,[g]){let v=t;t=o(i),t===v?r[t].p(i,g):(be(),L(r[v],1,1,()=>{r[v]=null}),_e(),l=r[t],l?l.p(i,g):(l=r[t]=u[t](i),l.c()),E(l,1),l.m(e.parentNode,e))},i(i){a||(E(l),a=!0)},o(i){L(l),a=!1},d(i){i&&b(e),r[t].d(i)}}}function Ve(n,t,l){let e;we(n,Te,p=>l(8,e=p));let a,u,{data:r}=t,o,i;const g=async()=>{try{const p=structuredClone(await fe.collection("projects").getOne(r.projectId));e.id==p.user?(l(1,o=p),o.thumbnail?l(2,i=De(o.collectionId,o.id,o.thumbnail,"80x80")):l(2,i=J)):Ne.error("You may fork this project!",{position:"bottom-center",style:" padding: 16px; color: white; background-color: coral;"})}catch(p){console.log(p.status,p.data)}};async function v(p){let j=new FormData(p.target);(i==J||i.slice(0,4)!="blob")&&j.delete("thumbnail");const{formData:T,err:A}=await Se(j,Oe);if(l(0,a=A?.fieldErrors),!A){try{await fe.collection("projects").update(r.projectId,Re.serialize(T))}catch(B){console.log(B.status,B.data)}Le("/my/projects/")}}const R=p=>{const j=p.target.files;if(j.length>0){const T=URL.createObjectURL(j[0]);l(2,i=T)}};async function H(p){l(2,i=J)}return n.$$set=p=>{"data"in p&&l(7,r=p.data)},n.$$.update=()=>{n.$$.dirty&256&&(e.id,e.id&&g())},[a,o,i,u,v,R,H,r,e]}class rt extends ke{constructor(t){super(),ye(this,t,Ve,Fe,$e,{data:7})}}export{rt as component,tt as universal};
