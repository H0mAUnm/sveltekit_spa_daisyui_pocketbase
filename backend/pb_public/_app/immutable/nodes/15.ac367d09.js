import{s as N}from"../chunks/scheduler.a6287574.js";import{S as G,i as J,g as _,s as h,r as D,h as b,j as B,B as R,c as v,u as H,f as V,k as C,a as K,x as i,v as L,A as Q,D as W,d as M,t as S,w as k}from"../chunks/index.3e76b7a6.js";import{I as E}from"../chunks/Input.ae2cab64.js";import"../chunks/paths.1b4de03e.js";import{g as X}from"../chunks/navigation.d1a89a94.js";import{v as Y,a as Z}from"../chunks/utils.85594516.js";import"../chunks/Toaster.svelte_svelte_type_style_lang.3e69948a.js";import{p as q,U as ee}from"../chunks/stores.10c58602.js";import{r as te}from"../chunks/schemas.0ec87125.js";function ae(l){let r,n,w="Register for an account",g,m,y='Or <a href="/login" class="text-primary font-medium hover:cursor-pointer hover:underline">sign in</a> if you already have an account.',f,t,o,$,u,I,p,P,c,T,d,z='<button type="submit" class="btn btn-primary w-full">Register</button>',x,U,F;return o=new E({props:{id:"name",label:"Name",value:l[1]?.name,errors:l[0]?.name}}),u=new E({props:{type:"email",id:"email",label:"Email",value:l[1]?.email,errors:l[0]?.email}}),p=new E({props:{type:"password",id:"password",label:"Password",errors:l[0]?.password}}),c=new E({props:{type:"password",id:"passwordConfirm",label:"Confirm Password",errors:l[0]?.passwordConfirm}}),{c(){r=_("div"),n=_("h2"),n.textContent=w,g=h(),m=_("p"),m.innerHTML=y,f=h(),t=_("form"),D(o.$$.fragment),$=h(),D(u.$$.fragment),I=h(),D(p.$$.fragment),P=h(),D(c.$$.fragment),T=h(),d=_("div"),d.innerHTML=z,this.h()},l(e){r=b(e,"DIV",{class:!0});var a=B(r);n=b(a,"H2",{class:!0,"data-svelte-h":!0}),R(n)!=="svelte-vz7ez5"&&(n.textContent=w),g=v(a),m=b(a,"P",{class:!0,"data-svelte-h":!0}),R(m)!=="svelte-3ol2yt"&&(m.innerHTML=y),f=v(a),t=b(a,"FORM",{class:!0});var s=B(t);H(o.$$.fragment,s),$=v(s),H(u.$$.fragment,s),I=v(s),H(p.$$.fragment,s),P=v(s),H(c.$$.fragment,s),T=v(s),d=b(s,"DIV",{class:!0,"data-svelte-h":!0}),R(d)!=="svelte-skolkj"&&(d.innerHTML=z),s.forEach(V),a.forEach(V),this.h()},h(){C(n,"class","mt-2 text-center text-3xl font-bold tracking-tight text-base-content"),C(m,"class","text-center mt-1"),C(d,"class","w-full max-w-lg pt-2"),C(t,"class","flex flex-col items-center space-y-2 w-full pt-4"),C(r,"class","flex flex-col items-center h-full w-full")},m(e,a){K(e,r,a),i(r,n),i(r,g),i(r,m),i(r,f),i(r,t),L(o,t,null),i(t,$),L(u,t,null),i(t,I),L(p,t,null),i(t,P),L(c,t,null),i(t,T),i(t,d),x=!0,U||(F=Q(t,"submit",W(l[2])),U=!0)},p(e,[a]){const s={};a&2&&(s.value=e[1]?.name),a&1&&(s.errors=e[0]?.name),o.$set(s);const j={};a&2&&(j.value=e[1]?.email),a&1&&(j.errors=e[0]?.email),u.$set(j);const O={};a&1&&(O.errors=e[0]?.password),p.$set(O);const A={};a&1&&(A.errors=e[0]?.passwordConfirm),c.$set(A)},i(e){x||(M(o.$$.fragment,e),M(u.$$.fragment,e),M(p.$$.fragment,e),M(c.$$.fragment,e),x=!0)},o(e){S(o.$$.fragment,e),S(u.$$.fragment,e),S(p.$$.fragment,e),S(c.$$.fragment,e),x=!1},d(e){e&&V(r),k(o),k(u),k(p),k(c),U=!1,F()}}}function re(l,r,n){let w,g;async function m(y){const{formData:f,err:t}=await Y(new FormData(y.target),te);if(n(0,w=t?.fieldErrors),t){n(1,g=f);return}let o=Z(f.name.split(" ").join("")).toLowerCase();try{await q.collection("users").create({username:o,...f}),await q.collection("users").requestVerification(f.email),q.authStore.clear(),ee.set(void 0),X("/login")}catch($){console.log($.status,$.data)}}return[w,g,m]}class ce extends G{constructor(r){super(),J(this,r,re,ae,N,{})}}export{ce as component};
