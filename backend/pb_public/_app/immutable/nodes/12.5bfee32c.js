import{s as Q,h as X,o as Y}from"../chunks/scheduler.a6287574.js";import{S as Z,i as ee,g as w,s as h,r as C,h as y,j as F,B as R,c as b,u as D,f as V,k as v,a as te,x as n,v as P,A as re,D as ae,d as T,t as I,w as S}from"../chunks/index.3e76b7a6.js";import{p as K,U as ne}from"../chunks/stores.10c58602.js";import{g as N}from"../chunks/navigation.d1a89a94.js";import{I as k}from"../chunks/Input.ae2cab64.js";import"../chunks/paths.1b4de03e.js";import{v as se}from"../chunks/utils.85594516.js";import"../chunks/Toaster.svelte_svelte_type_style_lang.3e69948a.js";import{T as le}from"../chunks/TextArea.e4b99141.js";import{d as oe}from"../chunks/schemas.0ec87125.js";import{s as ie}from"../chunks/index.3d80d59d.js";function me(a){let i,f,e,m,E="Tell us more about this project",j,s,g="We'll need the name, tagline, link, and description",M,l,_,o,H,p,L,c,q,d,z,$,B='<button type="submit" class="btn btn-primary w-full max-w-lg">Create Project</button>',U,A,O;return l=new k({props:{id:"name",label:"Project name",value:a[1]?.name,errors:a[0]?.name}}),o=new k({props:{id:"tagline",label:"Project tagline",value:a[1]?.tagline,errors:a[0]?.tagline}}),p=new k({props:{id:"url",label:"Project URL",value:a[1]?.url,errors:a[0]?.url}}),c=new le({props:{id:"description",label:"Project description",value:a[1]?.description,errors:a[0]?.description}}),d=new k({props:{id:"thumbnail",label:"Thumbnail",type:"file",errors:a[0]?.thumbnail}}),{c(){i=w("div"),f=w("div"),e=w("form"),m=w("h3"),m.textContent=E,j=h(),s=w("p"),s.textContent=g,M=h(),C(l.$$.fragment),_=h(),C(o.$$.fragment),H=h(),C(p.$$.fragment),L=h(),C(c.$$.fragment),q=h(),C(d.$$.fragment),z=h(),$=w("div"),$.innerHTML=B,this.h()},l(t){i=y(t,"DIV",{class:!0});var u=F(i);f=y(u,"DIV",{class:!0});var x=F(f);e=y(x,"FORM",{class:!0,enctype:!0});var r=F(e);m=y(r,"H3",{class:!0,"data-svelte-h":!0}),R(m)!=="svelte-egsrir"&&(m.textContent=E),j=b(r),s=y(r,"P",{class:!0,"data-svelte-h":!0}),R(s)!=="svelte-uk4y8i"&&(s.textContent=g),M=b(r),D(l.$$.fragment,r),_=b(r),D(o.$$.fragment,r),H=b(r),D(p.$$.fragment,r),L=b(r),D(c.$$.fragment,r),q=b(r),D(d.$$.fragment,r),z=b(r),$=y(r,"DIV",{class:!0,"data-svelte-h":!0}),R($)!=="svelte-19bbc3q"&&($.innerHTML=B),r.forEach(V),x.forEach(V),u.forEach(V),this.h()},h(){v(m,"class","text-3xl font-bold"),v(s,"class","mt-2 text-lg"),v($,"class","w-full max-w-lg pt-3"),v(e,"class","flex flex-col space-y-2 w-full items-center"),v(e,"enctype","multipart/form-data"),v(f,"class","w-full"),v(i,"class","flex flex-col w-full h-full p-2")},m(t,u){te(t,i,u),n(i,f),n(f,e),n(e,m),n(e,j),n(e,s),n(e,M),P(l,e,null),n(e,_),P(o,e,null),n(e,H),P(p,e,null),n(e,L),P(c,e,null),n(e,q),P(d,e,null),n(e,z),n(e,$),U=!0,A||(O=re(e,"submit",ae(a[2])),A=!0)},p(t,[u]){const x={};u&1&&(x.errors=t[0]?.name),l.$set(x);const r={};u&1&&(r.errors=t[0]?.tagline),o.$set(r);const W={};u&1&&(W.errors=t[0]?.url),p.$set(W);const G={};u&1&&(G.errors=t[0]?.description),c.$set(G);const J={};u&1&&(J.errors=t[0]?.thumbnail),d.$set(J)},i(t){U||(T(l.$$.fragment,t),T(o.$$.fragment,t),T(p.$$.fragment,t),T(c.$$.fragment,t),T(d.$$.fragment,t),U=!0)},o(t){I(l.$$.fragment,t),I(o.$$.fragment,t),I(p.$$.fragment,t),I(c.$$.fragment,t),I(d.$$.fragment,t),U=!1},d(t){t&&V(i),S(l),S(o),S(p),S(c),S(d),A=!1,O()}}}function ue(a,i,f){let e;X(a,ne,s=>f(3,e=s));let m,E;Y(async()=>{K.authStore.isValid||N("/login")});async function j(s){let g=new FormData(s.target);g.get("thumbnail").size===0&&g.delete("thumbnail"),g.append("user",e.id);const{formData:l,err:_}=await se(g,oe);if(f(0,m=_?.fieldErrors),!_){console.log(l);try{await K.collection("projects").create(ie.serialize(l))}catch(o){console.log(o.status,o.data)}N("/my/projects")}}return[m,E,j]}class ye extends Z{constructor(i){super(),ee(this,i,ue,me,Q,{})}}export{ye as component};
