import{s as z,h as G}from"../chunks/scheduler.a6287574.js";import{S as J,i as K,g as $,s as _,r as V,h as v,j as D,B as H,c as b,f as C,u as M,k as p,a as Q,x as r,v as j,A as W,D as X,d as A,t as F,w as L}from"../chunks/index.3e76b7a6.js";import{I as N}from"../chunks/Input.ae2cab64.js";import"../chunks/paths.1b4de03e.js";import{g as Y}from"../chunks/navigation.d1a89a94.js";import{v as Z}from"../chunks/utils.85594516.js";import"../chunks/Toaster.svelte_svelte_type_style_lang.3e69948a.js";import{p as R,U as tt}from"../chunks/stores.10c58602.js";import{c as et}from"../chunks/schemas.0ec87125.js";function st(c){let a,n,t,o,y="Change Password",w,h,l,i,I,d,E,u,S,f,O="I forgot my password",q,g,T='<button type="submit" class="btn btn-primary w-full max-w-lg">Update Password</button>',P,U,k;return i=new N({props:{id:"oldPassword",label:"Old Password",type:"password",required:!0,errors:c[0]?.oldPassword}}),d=new N({props:{id:"password",label:"New Password",type:"password",required:!0,errors:c[0]?.password}}),u=new N({props:{id:"passwordConfirm",label:"Confirm New Password",type:"password",required:!0,errors:c[0]?.passwordConfirm}}),{c(){a=$("div"),n=$("div"),t=$("form"),o=$("h3"),o.textContent=y,w=_(),h=$("div"),l=_(),V(i.$$.fragment),I=_(),V(d.$$.fragment),E=_(),V(u.$$.fragment),S=_(),f=$("a"),f.textContent=O,q=_(),g=$("div"),g.innerHTML=T,this.h()},l(e){a=v(e,"DIV",{class:!0});var m=D(a);n=v(m,"DIV",{class:!0});var x=D(n);t=v(x,"FORM",{class:!0});var s=D(t);o=v(s,"H3",{class:!0,"data-svelte-h":!0}),H(o)!=="svelte-292187"&&(o.textContent=y),w=b(s),h=v(s,"DIV",{class:!0}),D(h).forEach(C),l=b(s),M(i.$$.fragment,s),I=b(s),M(d.$$.fragment,s),E=b(s),M(u.$$.fragment,s),S=b(s),f=v(s,"A",{href:!0,class:!0,"data-svelte-h":!0}),H(f)!=="svelte-1b7h5ab"&&(f.textContent=O),q=b(s),g=v(s,"DIV",{class:!0,"data-svelte-h":!0}),H(g)!=="svelte-10gmuyj"&&(g.innerHTML=T),s.forEach(C),x.forEach(C),m.forEach(C),this.h()},h(){p(o,"class","text-2xl font-medium"),p(h,"class","divider"),p(f,"href","/reset-password"),p(f,"class","text-primary hover:cursor-point hover:underline"),p(g,"class","w-full max-w-lg pt-3"),p(t,"class","flex flex-col space-y-2 w-full"),p(n,"class","w-full"),p(a,"class","flex flex-col w-full h-full")},m(e,m){Q(e,a,m),r(a,n),r(n,t),r(t,o),r(t,w),r(t,h),r(t,l),j(i,t,null),r(t,I),j(d,t,null),r(t,E),j(u,t,null),r(t,S),r(t,f),r(t,q),r(t,g),P=!0,U||(k=W(t,"submit",X(c[1])),U=!0)},p(e,[m]){const x={};m&1&&(x.errors=e[0]?.oldPassword),i.$set(x);const s={};m&1&&(s.errors=e[0]?.password),d.$set(s);const B={};m&1&&(B.errors=e[0]?.passwordConfirm),u.$set(B)},i(e){P||(A(i.$$.fragment,e),A(d.$$.fragment,e),A(u.$$.fragment,e),P=!0)},o(e){F(i.$$.fragment,e),F(d.$$.fragment,e),F(u.$$.fragment,e),P=!1},d(e){e&&C(a),L(i),L(d),L(u),U=!1,k()}}}function rt(c,a,n){let t;G(c,tt,w=>n(2,t=w));let o;async function y(w){const{formData:h,err:l}=await Z(new FormData(w.target),et);if(n(0,o=l?.fieldErrors),!l){try{await R.collection("users").update(t.id,h),R.authStore.clear()}catch{console.log(l.status,l.data)}Y("/login")}}return[o,y]}class pt extends J{constructor(a){super(),K(this,a,rt,st,z,{})}}export{pt as component};
