import{S as Y,i as ee,s as te,k as _,q as Z,a as v,w as V,l as w,m as y,r as G,h,c as j,x as k,n as c,b as re,H as a,y as z,R as ae,Z as ne,f as C,t as R,z as q,U as se,o as le}from"../../../../chunks/index-aedd6872.js";import{p as Q,U as oe}from"../../../../chunks/stores-3f27b470.js";import{g as X}from"../../../../chunks/navigation-b75dba13.js";import{I as M}from"../../../../chunks/Input-ab618a3e.js";import"../../../../chunks/forms-f02374ed.js";import{v as ie}from"../../../../chunks/utils-04416275.js";import{T as me}from"../../../../chunks/TextArea-4a2cbcb3.js";import{d as ue}from"../../../../chunks/schemas-fdc952c7.js";import{s as fe}from"../../../../chunks/index-3da723cb.js";function ce(n){let l,u,e,f,D,T,o,p,F,i,P,s,O,d,W,$,A,g,B,E,b,L,H,N,J;return i=new M({props:{id:"name",label:"Project name",value:n[1]?.name,errors:n[0]?.name}}),s=new M({props:{id:"tagline",label:"Project tagline",value:n[1]?.tagline,errors:n[0]?.tagline}}),d=new M({props:{id:"url",label:"Project URL",value:n[1]?.url,errors:n[0]?.url}}),$=new me({props:{id:"description",label:"Project description",value:n[1]?.description,errors:n[0]?.description}}),g=new M({props:{id:"thumbnail",label:"Thumbnail",type:"file",errors:n[0]?.thumbnail}}),{c(){l=_("div"),u=_("div"),e=_("form"),f=_("h3"),D=Z("Tell us more about this project"),T=v(),o=_("p"),p=Z("We'll need the name, tagline, link, and description"),F=v(),V(i.$$.fragment),P=v(),V(s.$$.fragment),O=v(),V(d.$$.fragment),W=v(),V($.$$.fragment),A=v(),V(g.$$.fragment),B=v(),E=_("div"),b=_("button"),L=Z("Create Project"),this.h()},l(t){l=w(t,"DIV",{class:!0});var m=y(l);u=w(m,"DIV",{class:!0});var U=y(u);e=w(U,"FORM",{class:!0,enctype:!0});var r=y(e);f=w(r,"H3",{class:!0});var I=y(f);D=G(I,"Tell us more about this project"),I.forEach(h),T=j(r),o=w(r,"P",{class:!0});var S=y(o);p=G(S,"We'll need the name, tagline, link, and description"),S.forEach(h),F=j(r),k(i.$$.fragment,r),P=j(r),k(s.$$.fragment,r),O=j(r),k(d.$$.fragment,r),W=j(r),k($.$$.fragment,r),A=j(r),k(g.$$.fragment,r),B=j(r),E=w(r,"DIV",{class:!0});var x=y(E);b=w(x,"BUTTON",{type:!0,class:!0});var K=y(b);L=G(K,"Create Project"),K.forEach(h),x.forEach(h),r.forEach(h),U.forEach(h),m.forEach(h),this.h()},h(){c(f,"class","text-3xl font-bold"),c(o,"class","mt-2 text-lg"),c(b,"type","submit"),c(b,"class","btn btn-primary w-full max-w-lg"),c(E,"class","w-full max-w-lg pt-3"),c(e,"class","flex flex-col space-y-2 w-full items-center"),c(e,"enctype","multipart/form-data"),c(u,"class","w-full"),c(l,"class","flex flex-col w-full h-full p-2")},m(t,m){re(t,l,m),a(l,u),a(u,e),a(e,f),a(f,D),a(e,T),a(e,o),a(o,p),a(e,F),z(i,e,null),a(e,P),z(s,e,null),a(e,O),z(d,e,null),a(e,W),z($,e,null),a(e,A),z(g,e,null),a(e,B),a(e,E),a(E,b),a(b,L),H=!0,N||(J=ae(e,"submit",ne(n[2])),N=!0)},p(t,[m]){const U={};m&1&&(U.errors=t[0]?.name),i.$set(U);const r={};m&1&&(r.errors=t[0]?.tagline),s.$set(r);const I={};m&1&&(I.errors=t[0]?.url),d.$set(I);const S={};m&1&&(S.errors=t[0]?.description),$.$set(S);const x={};m&1&&(x.errors=t[0]?.thumbnail),g.$set(x)},i(t){H||(C(i.$$.fragment,t),C(s.$$.fragment,t),C(d.$$.fragment,t),C($.$$.fragment,t),C(g.$$.fragment,t),H=!0)},o(t){R(i.$$.fragment,t),R(s.$$.fragment,t),R(d.$$.fragment,t),R($.$$.fragment,t),R(g.$$.fragment,t),H=!1},d(t){t&&h(l),q(i),q(s),q(d),q($),q(g),N=!1,J()}}}function pe(n,l,u){let e;se(n,oe,o=>u(3,e=o));let f,D;le(async()=>{Q.authStore.isValid||X("/login")});async function T(o){let p=new FormData(o.target);p.get("thumbnail").size===0&&p.delete("thumbnail"),p.append("user",e.id);const{formData:i,err:P}=await ie(p,ue);if(u(0,f=P?.fieldErrors),!P){try{await Q.collection("projects").create(fe.serialize(i))}catch(s){console.log(s.status,s.data)}X("/my/projects")}}return[f,D,T]}class je extends Y{constructor(l){super(),ee(this,l,pe,ce,te,{})}}export{je as default};
