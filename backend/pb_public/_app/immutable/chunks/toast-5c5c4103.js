import{d as U,w as R}from"./index-af210860.js";import{X as T}from"./index-aedd6872.js";function j(e,i,r,n){var a,w,l=!1,m="withOld"in r,k=(t,u)=>{if(a=u,m&&(w=t),!l){let o=i(t,u);if(i.length<2)u(o);else return o}l=!1},p=U(e,k,n),P=!Array.isArray(e),h=t=>{P?(l=!0,e.set(t)):t.forEach((u,o)=>{l=!0,e[o].set(u)}),l=!1};m&&(r=r.withOld);var Q=r.length>=(m?3:2),v=null;function _(t){if(v&&(v(),v=null),m)var u=r(t,w,h);else var u=r(t,h);Q?typeof u=="function"&&(v=u):h(u)}var y=!1;function D(t){var u,o,A,c;if(y){c=t(T(p)),a(c);return}var x=p.subscribe(E=>{y?u?o=!0:u=!0:A=E});c=t(A),y=!0,a(c),x(),y=!1,o&&(c=T(p)),u&&_(c)}return{subscribe:p.subscribe,set(t){D(()=>t)},update:D}}const B=20,d=R([]),g=R(null),b=new Map,S=e=>{if(b.has(e))return;const i=setTimeout(()=>{b.delete(e),V(e)},1e3);b.set(e,i)},H=e=>{const i=b.get(e);i&&clearTimeout(i)};function L(e){e.id&&H(e.id),d.update(i=>i.map(r=>r.id===e.id?{...r,...e}:r))}function N(e){d.update(i=>[e,...i].slice(0,B))}function X(e){T(d).find(i=>i.id===e.id)?L(e):N(e)}function q(e){d.update(i=>(e?S(e):i.forEach(r=>{S(r.id)}),i.map(r=>r.id===e||e===void 0?{...r,visible:!1}:r)))}function V(e){d.update(i=>e===void 0?[]:i.filter(r=>r.id!==e))}function Y(e){g.set(e)}function Z(e){let i;g.update(r=>(i=e-(r||0),null)),d.update(r=>r.map(n=>({...n,pauseDuration:n.pauseDuration+i})))}const z={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function $(e={}){return{toasts:j(d,r=>r.map(n=>({...e,...e[n.type],...n,duration:n.duration||e[n.type]?.duration||e?.duration||z[n.type],style:[e.style,e[n.type]?.style,n.style].join(";")})),r=>r),pausedAt:g}}const C=e=>typeof e=="function",M=(e,i)=>C(e)?e(i):e,F=(()=>{let e=0;return()=>(e+=1,e.toString())})(),W=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){const i=matchMedia("(prefers-reduced-motion: reduce)");e=!i||i.matches}return e}})(),G=(e,i="blank",r)=>({createdAt:Date.now(),visible:!0,type:i,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:r?.id||F()}),f=e=>(i,r)=>{const n=G(i,e,r);return X(n),n.id},s=(e,i)=>f("blank")(e,i);s.error=f("error");s.success=f("success");s.loading=f("loading");s.custom=f("custom");s.dismiss=e=>{q(e)};s.remove=e=>V(e);s.promise=(e,i,r)=>{const n=s.loading(i.loading,{...r,...r?.loading});return e.then(a=>(s.success(M(i.success,a),{id:n,...r,...r?.success}),a)).catch(a=>{s.error(M(i.error,a),{id:n,...r,...r?.error})}),e};const I=s;export{L as a,Z as e,W as p,Y as s,I as t,$ as u};
