import{d as P,w as D}from"./index.61ea6cac.js";import{p as m}from"./scheduler.a6287574.js";function Q(e,t,r,s){var a,b,f=!1,M=r.length>=2,S=(u,n,c)=>{if(a=n,M&&(b=u),!f){let l=t(u,n,c);if(t.length<2)n(l);else return l}f=!1},v=P(e,S,s),A=!Array.isArray(e);function R(u){var n=r(u,b);A?(f=!0,e.set(n)):n.forEach((c,l)=>{f=!0,e[l].set(c)}),f=!1}var p=!1;function T(u){var n,c,l,d;if(p){d=u(m(v)),a(d);return}var V=v.subscribe(E=>{p?n?c=!0:n=!0:l=E});d=u(l),p=!0,a(d),V(),p=!1,c&&(d=m(v)),n&&R(d)}return{subscribe:v.subscribe,set(u){T(()=>u)},update:T}}const x=20,o=D([]),g=D(null),y=new Map,h=e=>{if(y.has(e))return;const t=setTimeout(()=>{y.delete(e),k(e)},1e3);y.set(e,t)},B=e=>{const t=y.get(e);t&&clearTimeout(t)};function L(e){e.id&&B(e.id),o.update(t=>t.map(r=>r.id===e.id?{...r,...e}:r))}function W(e){o.update(t=>[e,...t].slice(0,x))}function j(e){m(o).find(t=>t.id===e.id)?L(e):W(e)}function C(e){o.update(t=>(e?h(e):t.forEach(r=>{h(r.id)}),t.map(r=>r.id===e||e===void 0?{...r,visible:!1}:r)))}function k(e){o.update(t=>e===void 0?[]:t.filter(r=>r.id!==e))}function F(e){g.set(e)}function G(e){let t;g.update(r=>(t=e-(r||0),null)),o.update(r=>r.map(s=>({...s,pauseDuration:s.pauseDuration+t})))}const H={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function J(e={}){return{toasts:Q(o,r=>r.map(s=>({...e,...e[s.type],...s,duration:s.duration||e[s.type]?.duration||e?.duration||H[s.type],style:[e.style,e[s.type]?.style,s.style].join(";")})),r=>r),pausedAt:g}}const I=e=>typeof e=="function",w=(e,t)=>I(e)?e(t):e,N=(()=>{let e=0;return()=>(e+=1,e.toString())})(),K=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){const t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),U=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:r?.id||N()}),_=e=>(t,r)=>{const s=U(t,e,r);return j(s),s.id},i=(e,t)=>_("blank")(e,t);i.error=_("error");i.success=_("success");i.loading=_("loading");i.custom=_("custom");i.dismiss=e=>{C(e)};i.remove=e=>k(e);i.promise=(e,t,r)=>{const s=i.loading(t.loading,{...r,...r?.loading});return e.then(a=>(i.success(w(t.success,a),{id:s,...r,...r?.success}),a)).catch(a=>{i.error(w(t.error,a),{id:s,...r,...r?.error})}),e};export{L as a,G as e,K as p,F as s,i as t,J as u};
